---
// Card component
interface Props {
  onClick?: string;
  href?: string;
  target?: string;
  label?: string; // For accessibility (aria-label) when interactive
  title?: string; // Optional tooltip
}

const { onClick, href, target, label, title } = Astro.props;

// Determine the tag based on props
const Tag = href ? "a" : onClick ? "button" : "div";
const rel = target === "_blank" ? "noopener noreferrer" : undefined;
const isInteractive = href || onClick;
---

<Tag
  class="card"
  href={href}
  target={target}
  rel={rel}
  onclick={onClick}
  aria-label={label}
  title={title}
  role={Tag === "div" && isInteractive ? "button" : undefined}
  tabindex={Tag === "div" && isInteractive ? 0 : undefined}
>
  <slot />
</Tag>

<style lang="scss">
  @use "../styles/corners.scss" as *;

  .card {
    // Reset button/link styles when interactive
    all: unset;
    box-sizing: border-box;

    --shadow-distance: 4px;
    position: relative;
    display: block;
    padding: 0.5rem;
    background: var(--bg-secondary);
    aspect-ratio: var(--aspectRatio);
    box-shadow: var(--shadow-distance) var(--shadow-distance) rgba(1, 1, 1, 0.1);
    border-radius: 0.5rem;
    border: 4px solid var(--accent-lime);
    text-decoration: none;
    color: inherit;

    transition: all 200ms var(--ease-out-back);

    // Interactive states - only for clickable cards
    &[href],
    &[onclick],
    &[role="button"] {
      &:hover {
        transition: all 25ms linear;
        cursor: pointer;
        box-shadow: 0 0 rgba(1, 1, 1, 0.1);
        transform: translate(3px, 3px);
      }

      &:focus-visible {
        outline: 2px solid var(--accent-lime);
        outline-offset: 2px;
      }
    }
  }
</style>
